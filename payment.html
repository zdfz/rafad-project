<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Clothing Store Payment Form">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title data-en="Payment - Rifad Store" data-ar="ÿßŸÑÿØŸÅÿπ - ŸÖÿ™ÿ¨ÿ± ÿ±ŸÅÿßÿØ">Payment - Rifad Store</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Embedded CSS */
        :root {
            --background-color-light: #f4f4f4;
            --text-color-light: #333;
            --container-background-light: #ffffff;
            --border-color-light: #ccc;
            --input-background-light: #eee;
            --input-text-light: #333;
            --accent-color-light: #007bff;
            --shadow-color-light: rgba(0, 0, 0, 0.1);
            --button-background-light: #007bff;
            --button-text-light: #fff;

            --background-color-dark: #1a2b3c;
            --text-color-dark: #ffffff;
            --container-background-dark: #2a3b4c;
            --border-color-dark: #0a192f;
            --input-background-dark: #0a192f;
            --input-text-dark: #e6f1ff;
            --accent-color-dark: #64ffda;
            --shadow-color-dark: rgba(0, 0, 0, 0.5);
            --button-background-dark: #64ffda;
            --button-text-dark: #0a192f;

            /* Typography */
            --font-en: 'Poppins', sans-serif;
            --font-ar: 'Tajawal', sans-serif;
        }

        body {
            font-family: var(--font-en);
            background-color: var(--background-color-light);
            color: var(--text-color-light);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        body.dark-mode {
            background-color: var(--background-color-dark);
            color: var(--text-color-dark);
        }

        body[dir="rtl"] {
            font-family: var(--font-ar);
        }

        .payment-container {
            background-color: var(--container-background-light);
            padding: 30px;
            border-radius: 10px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 0 20px var(--shadow-color-light);
            display: flex;
            flex-direction: column;
            gap: 20px;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }

        body.dark-mode .payment-container {
            background-color: var(--container-background-dark);
            box-shadow: 0 0 20px var(--shadow-color-dark);
        }

        .logo {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .logo img {
            max-width: 80px;
            height: auto;
        }

        h2 {
            text-align: center;
            color: var(--accent-color-light);
            margin-bottom: 20px;
            transition: color 0.3s ease;
        }

        body.dark-mode h2 {
            color: var(--accent-color-dark);
        }

        .form-group {
            margin-bottom: 15px;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--text-color-light);
            position: relative;
            padding-left: 30px;
            line-height: 1.5;
            transition: color 0.3s ease;
        }

         body.dark-mode .form-group label {
             color: var(--text-color-dark);
         }

        .form-group label i {
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            color: var(--accent-color-light);
            font-size: 1.1em;
            transition: color 0.3s ease;
        }

         body.dark-mode .form-group label i {
             color: var(--accent-color-dark);
         }

        [dir="rtl"] .form-group label {
            padding-left: 0;
            padding-right: 30px;
        }

        [dir="rtl"] .form-group label i {
            left: auto;
            right: 0;
        }

        .form-group input[type="text"],
        .form-group input[type="tel"],
        .form-group input[type="email"],
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            padding-left: 10px; /* Reset LTR padding */
            padding-right: 10px; /* Reset RTL padding */
            border: 1px solid var(--border-color-light);
            border-radius: 5px;
            background-color: var(--input-background-light);
            color: var(--input-text-light);
            font-size: 1em;
            box-sizing: border-box;
            transition: border-color 0.3s ease, background-color 0.3s ease, color 0.3s ease;
        }

        body.dark-mode .form-group input[type="text"],
        body.dark-mode .form-group input[type="tel"],
        body.dark-mode .form-group input[type="email"],
        body.dark-mode .form-group textarea,
        body.dark-mode .form-group select {
            border: 1px solid var(--border-color-dark);
            background-color: var(--input-background-dark);
            color: var(--input-text-dark);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

         .product-summary {
             display: flex;
             gap: 20px;
             align-items: center;
             margin-bottom: 20px;
             padding-bottom: 20px;
             border-bottom: 1px solid var(--border-color-light);
             transition: border-color 0.3s ease;
         }

         body.dark-mode .product-summary {
             border-bottom: 1px solid var(--border-color-dark);
         }

         .product-summary img {
             max-width: 80px;
             height: auto;
             border-radius: 5px;
         }

         .product-details {
             flex-grow: 1;
         }

         .product-details h3 {
             margin: 0 0 5px 0;
             color: var(--text-color-light);
             transition: color 0.3s ease;
         }

          body.dark-mode .product-details h3 {
              color: var(--text-color-dark);
          }

         .product-details p {
             margin: 0;
             font-size: 0.9em;
             color: #666;
              transition: color 0.3s ease;
         }
         body.dark-mode .product-details p {
             color: #aaa;
         }

         [dir="rtl"] .product-summary {
             flex-direction: row-reverse;
         }

         [dir="rtl"] .product-details h3,
         [dir="rtl"] .product-details p {
             text-align: right;
         }

        .payment-methods {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color-light);
            transition: border-color 0.3s ease;
        }

         body.dark-mode .payment-methods {
              border-top: 1px solid var(--border-color-dark);
         }

        .payment-methods h3 {
            margin-bottom: 15px;
            color: var(--text-color-light);
            transition: color 0.3s ease;
        }
         body.dark-mode .payment-methods h3 {
             color: var(--text-color-dark);
         }

        .payment-method {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            border: 2px solid var(--border-color-light);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: var(--input-background-light);
        }

        body.dark-mode .payment-method {
            border-color: var(--border-color-dark);
            background-color: var(--input-background-dark);
        }

        .payment-method:hover {
            border-color: var(--accent-color-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        body.dark-mode .payment-method:hover {
            border-color: var(--accent-color-dark);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .payment-method.selected {
            border-color: var(--accent-color-light);
            background-color: rgba(0, 123, 255, 0.1);
        }
         body.dark-mode .payment-method.selected {
             border-color: var(--accent-color-dark);
             background-color: rgba(100, 255, 218, 0.1);
         }

        .payment-method .payment-icon {
            width: 60px;
            height: 40px;
            object-fit: contain;
            margin-right: 15px;
            border-radius: 4px;
        }
         [dir="rtl"] .payment-method .payment-icon {
              margin-right: 0;
              margin-left: 15px;
         }

        .payment-method span {
            font-weight: 500;
            color: var(--text-color-light);
            transition: color 0.3s ease;
        }
         body.dark-mode .payment-method span {
             color: var(--text-color-dark);
         }

        .payment-method .en,
        .payment-method .ar {
            display: none;
        }

        [lang="en"] .payment-method .en,
        [lang="ar"] .payment-method .ar {
            display: inline;
        }

        .total-cost {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color-light);
            padding: 15px;
            border-radius: 8px;
            background-color: rgba(0, 123, 255, 0.05); /* Subtle background */
            font-size: 1.2em;
            font-weight: bold;
            color: var(--accent-color-light);
            text-align: right;
            transition: border-color 0.3s ease, color 0.3s ease;
            display: flex;
            flex-direction: column;
            gap: 10px; /* Space between cost items */
        }

         body.dark-mode .total-cost {
             border-top: 1px solid var(--border-color-dark);
             color: var(--accent-color-dark);
             background-color: rgba(100, 255, 218, 0.05); /* Subtle background in dark mode */
         }

        [dir="rtl"] .total-cost {
            text-align: left;
        }

        .total-cost .cost-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9em; /* Smaller font for individual items */
            font-weight: normal; /* Reset font-weight from parent */
            padding-bottom: 5px; /* Space below each item */
            border-bottom: 1px dashed rgba(0, 123, 255, 0.1); /* Subtle separator */
        }

        body.dark-mode .total-cost .cost-item {
             border-bottom: 1px dashed rgba(100, 255, 218, 0.1); /* Subtle separator in dark mode */
        }

        .total-cost .cost-item:last-child {
            border-bottom: none; /* No border on the last item before total */
            padding-bottom: 0;
        }

        .total-cost .cost-label {
            color: var(--text-color-light); /* Label color */
        }

         body.dark-mode .total-cost .cost-label {
              color: var(--text-color-dark); /* Label color in dark mode */
         }

        .total-cost .cost-value {
            color: var(--text-color-light); /* Value color */
            font-weight: bold;
        }
         body.dark-mode .total-cost .cost-value {
              color: var(--text-color-dark); /* Value color in dark mode */
         }

        .total-cost .cost-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.3em; /* Larger font for total */
            font-weight: bold;
            margin-top: 10px; /* Space above total */
            padding-top: 10px; /* Padding above total */
            border-top: 2px solid var(--accent-color-light); /* Thicker border above total */
        }

        body.dark-mode .total-cost .cost-total {
             border-top: 2px solid var(--accent-color-dark); /* Thicker border above total in dark mode */
        }

        .total-cost .total-label {
             color: var(--accent-color-light); /* Accent color for total label */
        }

        body.dark-mode .total-cost .total-label {
              color: var(--accent-color-dark); /* Accent color for total label in dark mode */
        }

        .total-cost .total-amount {
            color: var(--accent-color-light); /* Accent color for total amount */
        }

         body.dark-mode .total-cost .total-amount {
              color: var(--accent-color-dark); /* Accent color for total amount in dark mode */
         }

        [dir="rtl"] .total-cost .cost-item,
        [dir="rtl"] .total-cost .cost-total {
             flex-direction: row-reverse; /* Reverse order for RTL */
        }

        [dir="rtl"] .total-cost .cost-label,
        [dir="rtl"] .total-cost .cost-value,
        [dir="rtl"] .total-cost .total-label,
        [dir="rtl"] .total-cost .total-amount {
            text-align: unset; /* Prevent text-align from interfering with flex layout */
        }

        .pay-button {
            display: block;
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 5px;
            background-color: var(--button-background-light);
            color: var(--button-text-light);
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease, color 0.3s ease;
             margin-top: 20px;
        }

        body.dark-mode .pay-button {
            background-color: var(--button-background-dark);
            color: var(--button-text-dark);
        }

        .pay-button:hover {
            opacity: 0.9;
        }

        .language-toggle, .theme-toggle {
            position: absolute;
            top: 20px;
            background-color: var(--container-background-light);
            color: var(--text-color-light);
            border: 1px solid var(--border-color-light);
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            z-index: 10;
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }

        body.dark-mode .language-toggle, body.dark-mode .theme-toggle {
            background-color: var(--container-background-dark);
            color: var(--text-color-dark);
            border: 1px solid var(--border-color-dark);
        }

        .language-toggle {
             right: 20px;
        }

        .theme-toggle {
            right: 100px; /* Adjust position relative to language toggle */
        }

        [dir="rtl"] .language-toggle {
             right: auto;
             left: 20px;
        }

         [dir="rtl"] .theme-toggle {
             right: auto;
             left: 100px; /* Adjust position for RTL */
         }

        /* Language specific classes */
        .en, .ar {
            display: none;
        }
        html[lang="en"] .en {
            display: inline;
        }
        html[lang="ar"] .ar {
            display: inline;
        }

        /* Success Message */
        .success-message {
             display: none; /* Hidden by default */
             text-align: center;
             padding: 30px;
             border-radius: 10px;
             background-color: #d4edda;
             color: #155724;
             border: 1px solid #c3e6cb;
             margin-top: 20px;
        }

        body.dark-mode .success-message {
            background-color: #1a3632;
            color: #64ffda;
            border-color: #3a5a52;
        }

        .success-message h2 {
            color: #155724;
            margin-top: 0;
        }

        body.dark-mode .success-message h2 {
             color: #64ffda;
        }

        /* Responsive adjustments */
        @media (max-width: 480px) {
            .payment-container {
                padding: 20px;
            }
            body {
                padding: 10px;
            }
             .language-toggle, .theme-toggle {
                 top: 10px;
                 padding: 6px 10px;
             }
            .language-toggle {
                 right: 10px;
            }
            .theme-toggle {
                 right: 80px;
            }
             [dir="rtl"] .language-toggle {
                 left: 10px;
                 right: auto;
             }
              [dir="rtl"] .theme-toggle {
                 left: 80px;
                 right: auto;
             }
        }

        .payment-page .payment-method .payment-icon {
            width: 40px;
            height: 25px;
            object-fit: contain;
            margin-right: 10px;
        }

        .shipping-companies {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color-light);
            transition: border-color 0.3s ease;
        }

        body.dark-mode .shipping-companies {
            border-top: 1px solid var(--border-color-dark);
        }

        .shipping-companies h3 {
            margin-bottom: 15px;
            color: var(--text-color-light);
            transition: color 0.3s ease;
        }

        body.dark-mode .shipping-companies h3 {
            color: var(--text-color-dark);
        }

        .shipping-company {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            border: 2px solid var(--border-color-light);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: var(--input-background-light);
        }

        body.dark-mode .shipping-company {
            border-color: var(--border-color-dark);
            background-color: var(--input-background-dark);
        }

        .shipping-company:hover {
            border-color: var(--accent-color-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        body.dark-mode .shipping-company:hover {
            border-color: var(--accent-color-dark);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .shipping-company.selected {
            border-color: var(--accent-color-light);
            background-color: rgba(0, 123, 255, 0.1);
        }

        body.dark-mode .shipping-company.selected {
            border-color: var(--accent-color-dark);
            background-color: rgba(100, 255, 218, 0.1);
        }

        .shipping-company .shipping-icon {
            width: 60px;
            height: 40px;
            object-fit: contain;
            margin-right: 15px;
            border-radius: 4px;
        }

        .shipping-company span {
            font-weight: 500;
            color: var(--text-color-light);
            transition: color 0.3s ease;
        }

        body.dark-mode .shipping-company span {
            color: var(--text-color-dark);
        }

        .shipping-company .en,
        .shipping-company .ar {
            display: none;
        }

        [lang="en"] .shipping-company .en,
        [lang="ar"] .shipping-company .ar {
            display: inline;
        }

        .quantity-selector {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color-light);
            transition: border-color 0.3s ease;
        }

        body.dark-mode .quantity-selector {
            border-top: 1px solid var(--border-color-dark);
        }

        .quantity-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }

        .quantity-selector h3 {
            margin-bottom: 0;
            color: var(--text-color-light);
            transition: color 0.3s ease;
            white-space: nowrap;
        }

        body.dark-mode .quantity-selector h3 {
            color: var(--text-color-dark);
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-btn {
            width: 40px;
            height: 40px;
            border: 2px solid var(--border-color-light);
            border-radius: 8px;
            background-color: var(--input-background-light);
            color: var(--text-color-light);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        body.dark-mode .quantity-btn {
            border-color: var(--border-color-dark);
            background-color: var(--input-background-dark);
            color: var(--text-color-dark);
        }

        .quantity-btn:hover {
            border-color: var(--accent-color-light);
            background-color: var(--accent-color-light);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        body.dark-mode .quantity-btn:hover {
            border-color: var(--accent-color-dark);
            background-color: var(--accent-color-dark);
            color: var(--dark-background);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .quantity-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .quantity-btn:disabled:hover {
            border-color: var(--border-color-light);
            background-color: var(--input-background-light);
            color: var(--text-color-light);
        }

        body.dark-mode .quantity-btn:disabled {
            border-color: var(--border-color-dark);
            background-color: var(--input-background-dark);
            color: var(--text-color-dark);
        }

        #quantity {
            width: 80px;
            height: 40px;
            text-align: center;
            border: 2px solid var(--border-color-light);
            border-radius: 8px;
            background-color: var(--input-background-light);
            color: var(--text-color-light);
            font-size: 18px;
            font-weight: 600;
            cursor: default;
        }

        body.dark-mode #quantity {
            border-color: var(--border-color-dark);
            background-color: var(--input-background-dark);
            color: var(--text-color-dark);
        }

        #quantity:focus {
            outline: none;
            border-color: var(--accent-color-light);
        }

        body.dark-mode #quantity:focus {
            border-color: var(--accent-color-dark);
        }
    </style>
</head>
<body class="light-mode">

    <div class="payment-container">
        <div class="logo">
            <img src="images/logo.png" alt="Rifad Project Logo">
        </div>
         <h2>
             <span class="en">Payment Information</span>
             <span class="ar">ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿØŸÅÿπ</span>
         </h2>

         <div class="product-summary">
             <img src="images/rifad.png" alt="Rifad Ihram's">
             <div class="product-details">
                 <h3 data-product-name></h3>
                 <p data-product-description>
                     <span class="en">A cooling Ihram designed for maximum comfort during your spiritual journey.</span>
                     <span class="ar">ÿ•ÿ≠ÿ±ÿßŸÖ ŸÖÿ®ÿ±ÿØ ŸÖÿµŸÖŸÖ ŸÑÿ£ŸÇÿµŸâ ÿØÿ±ÿ¨ÿßÿ™ ÿßŸÑÿ±ÿßÿ≠ÿ© ÿÆŸÑÿßŸÑ ÿ±ÿ≠ŸÑÿ™ŸÉ ÿßŸÑÿ±Ÿàÿ≠Ÿäÿ©.</span>
                 </p>
             </div>
         </div>

        <form id="paymentForm" novalidate>
             <div class="form-group">
                <label for="name"><i class="fas fa-user"></i> <span class="en">Full Name</span><span class="ar">ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ</span>:</label>
                <input type="text" id="name" required>
            </div>
            <div class="form-group">
                <label for="phone"><i class="fas fa-phone"></i> <span class="en">Phone Number</span><span class="ar">ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ</span>:</label>
                <input type="tel" id="phone" required pattern="[0-9]{10,}">
            </div>
            <div class="form-group">
                <label for="email"><i class="fas fa-envelope"></i> <span class="en">Email Address</span><span class="ar">ÿπŸÜŸàÿßŸÜ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä</span>:</label>
                <input type="email" id="email" required>
            </div>
             <div class="form-group">
                <label for="address"><i class="fas fa-map-marker-alt"></i> <span class="en">Address</span><span class="ar">ÿßŸÑÿπŸÜŸàÿßŸÜ</span>:</label>
                <textarea id="address" required></textarea>
            </div>

             <div class="shipping-companies">
                 <h3><span class="en">Select Shipping Company</span><span class="ar">ÿßÿÆÿ™ÿ± ÿ¥ÿ±ŸÉÿ© ÿßŸÑÿ¥ÿ≠ŸÜ</span></h3>
                 <div class="shipping-company" data-company="smsa">
                     <img src="images/smsa.jpg" alt="SMSA" class="shipping-icon">
                     <span class="en">SMSA</span><span class="ar">ÿ≥ŸÖÿ≥ÿß</span>
                 </div>
                 <div class="shipping-company" data-company="aramex">
                     <img src="images/aramex.png" alt="Aramex" class="shipping-icon">
                     <span class="en">Aramex</span><span class="ar">ÿ£ÿ±ÿßŸÖŸÉÿ≥</span>
                 </div>
             </div>

             <div class="payment-methods">
                 <h3><span class="en">Select Payment Method</span><span class="ar">ÿßÿÆÿ™ÿ± ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿØŸÅÿπ</span></h3>
                 <div class="payment-method" data-method="visa">
                     <img src="images/visa.png" alt="Visa" class="payment-icon">
                     <span class="en">Visa</span><span class="ar">ŸÅŸäÿ≤ÿß</span>
                 </div>
                  <div class="payment-method" data-method="mastercard">
                     <img src="images/mastercard.png" alt="MasterCard" class="payment-icon">
                     <span class="en">MasterCard</span><span class="ar">ŸÖÿßÿ≥ÿ™ÿ±ŸÉÿßÿ±ÿØ</span>
                 </div>
                  <div class="payment-method" data-method="mada">
                     <img src="images/mada.png" alt="Mada" class="payment-icon">
                     <span class="en">Mada</span><span class="ar">ŸÖÿØŸâ</span>
                 </div>
                  <!-- Add more payment methods as needed -->
             </div>

             <div class="quantity-selector">
                 <div class="quantity-header">
                     <h3><span class="en">Quantity</span><span class="ar">ÿßŸÑŸÉŸÖŸäÿ©</span></h3>
                     <div class="quantity-controls">
                         <button type="button" class="quantity-btn minus" onclick="changeQuantity(-1)">
                             <i class="fas fa-minus"></i>
                         </button>
                         <input type="number" id="quantity" value="1" min="1" max="10" readonly>
                         <button type="button" class="quantity-btn plus" onclick="changeQuantity(1)">
                             <i class="fas fa-plus"></i>
                         </button>
                     </div>
                 </div>
             </div>

            <div class="total-cost">
                <span class="total-label"><span class="en">Total Cost</span><span class="ar">ÿßŸÑÿ™ŸÉŸÑŸÅÿ© ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸäÿ©</span></span>: <span id="totalAmount"></span>
            </div>

            <button type="submit" class="pay-button" aria-label="Proceed to Payment">
                <span class="en">Proceed to Payment</span>
                <span class="ar">ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ© ŸÑŸÑÿØŸÅÿπ</span>
            </button>
        </form>

         <div id="successMessage" class="success-message">
             <h2 class="success-title"><span class="en">Payment Successful!</span><span class="ar">ÿ™ŸÖ ÿßŸÑÿØŸÅÿπ ÿ®ŸÜÿ¨ÿßÿ≠!</span></h2>
             <p><span class="en">Thank you for your purchase. Your order has been placed.</span><span class="ar">ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ ÿπŸÑŸâ ŸÖÿ¥ÿ™ÿ±Ÿäÿßÿ™ŸÉ. ÿ™ŸÖ ÿ™ŸÇÿØŸäŸÖ ÿ∑ŸÑÿ®ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠.</span></p>
         </div>

    </div>

    <button class="language-toggle" id="language-toggle" aria-label="Toggle language">
        <span class="en">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</span>
        <span class="ar">English</span>
    </button>

     <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
         <span class="light-icon">‚òÄÔ∏è</span>
         <span class="dark-icon">üåô</span>
     </button>

    <script>
        // Embedded JavaScript

        // Product prices and names based on type
        const PRODUCT_INFO = {
            ihram: {
                name: { en: "Rifad Ihram's", ar: "ÿ•ÿ≠ÿ±ÿßŸÖ ÿ±ŸÅÿßÿØ" },
                price: 80, // Default price for individual
                image: "images/rifad.png",
                description: {
                    en: "A cooling Ihram designed for maximum comfort during your spiritual journey.",
                    ar: "ÿ•ÿ≠ÿ±ÿßŸÖ ŸÖÿ®ÿ±ÿØ ŸÖÿµŸÖŸÖ ŸÑÿ£ŸÇÿµŸâ ÿØÿ±ÿ¨ÿßÿ™ ÿßŸÑÿ±ÿßÿ≠ÿ© ÿÆŸÑÿßŸÑ ÿ±ÿ≠ŸÑÿ™ŸÉ ÿßŸÑÿ±Ÿàÿ≠Ÿäÿ©."
                }
            },
            package: {
                name: { en: "Rifad Package's", ar: "ÿ≠ÿ≤ŸÖÿ© ÿ±ŸÅÿßÿØ" },
                price: 100, // Default price for individual
                image: "images/rifad with belt.png",
                description: {
                    en: "Complete package including cooling Ihram with a convenient belt for secure wearing.",
                    ar: "ÿ≠ÿ≤ŸÖÿ© ŸÉÿßŸÖŸÑÿ© ÿ™ÿ¥ŸÖŸÑ ÿ•ÿ≠ÿ±ÿßŸÖ ŸÖÿ®ÿ±ÿØ ŸÖÿπ ÿ≠ÿ≤ÿßŸÖ ŸÖÿ±Ÿäÿ≠ ŸÑŸÑÿßÿ±ÿ™ÿØÿßÿ° ÿßŸÑÿ¢ŸÖŸÜ."
                }
            }
        };

        let selectedProductType = 'ihram'; // Default or determined from URL

        // Function to get price based on user type
        function getProductPrice(productType) {
            const userType = localStorage.getItem('userType') || 'individual';
            const prices = {
                individual: {
                    ihram: 80,
                    package: 100
                },
                business: {
                    ihram: 60,
                    package: 90
                }
            };
            return prices[userType][productType] || PRODUCT_INFO[productType].price;
        }

        // Localized cost labels
        const COST_LABELS = {
            price: { en: "Price", ar: "ÿßŸÑÿ≥ÿπÿ±" },
            shipping: { en: "Shipping", ar: "ÿßŸÑÿ¥ÿ≠ŸÜ" },
            vat: { en: "VAT", ar: "ÿ∂ÿ±Ÿäÿ®ÿ© ÿßŸÑŸÇŸäŸÖÿ© ÿßŸÑŸÖÿ∂ÿßŸÅÿ©" },
            total: { en: "Total", ar: "ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä" }
        };

        // Function to update text content based on current language
        function updateTextContent() {
            const lang = document.documentElement.lang;

            // Toggle visibility of language-specific spans
            document.querySelectorAll('.en, .ar').forEach(el => {
                if (el.classList.contains(lang)) {
                    el.style.display = ''; // Or 'inline', 'block', etc.
                } else {
                    el.style.display = 'none';
                }
            });

             // Update placeholder texts for inputs and textarea
             document.querySelectorAll('#paymentForm input, #paymentForm textarea').forEach(input => {
                 const enPlaceholder = {
                     'name': 'Enter your name',
                     'phone': 'Enter your phone number',
                     'email': 'Enter your email',
                     'address': 'Enter your address'
                 };
                 const arPlaceholder = {
                     'name': 'ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖŸÉ',
                     'phone': 'ÿ£ÿØÿÆŸÑ ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅŸÉ',
                     'email': 'ÿ£ÿØÿÆŸÑ ÿ®ÿ±ŸäÿØŸÉ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä',
                     'address': 'ÿ£ÿØÿÆŸÑ ÿπŸÜŸàÿßŸÜŸÉ'
                 };
                 const placeholderText = lang === 'en' ? enPlaceholder[input.id] : arPlaceholder[input.id];
                 if (placeholderText) {
                      input.placeholder = placeholderText;
                 }
             });

            updateProductDetails(); // Update product name and total cost
             updatePaymentMethodText(); // Update payment method text
             updateShippingCompanyText(); // Update shipping company text
        }

         // Function to update the displayed product details and total cost
         function updateProductDetails() {
             const productInfo = PRODUCT_INFO[selectedProductType];
             const productNameElement = document.querySelector('.product-details h3[data-product-name]');
             const productImageElement = document.querySelector('.product-summary img');
             const productDescriptionElement = document.querySelector('[data-product-description]');
             const totalCostDiv = document.querySelector('.total-cost');
             const lang = document.documentElement.lang;

             if (productInfo) {
                 // Update product name
                 productNameElement.textContent = productInfo.name[lang] || productInfo.name.en; // Fallback to English

                 // Update product image
                 if (productImageElement && productInfo.image) {
                     productImageElement.src = productInfo.image;
                     productImageElement.alt = productInfo.name[lang] || productInfo.name.en;
                 }

                 // Update product description
                 if (productDescriptionElement && productInfo.description) {
                     const enSpan = productDescriptionElement.querySelector('.en');
                     const arSpan = productDescriptionElement.querySelector('.ar');
                     if (enSpan) enSpan.textContent = productInfo.description.en;
                     if (arSpan) arSpan.textContent = productInfo.description.ar;
                 }

                 // Update total cost
                 const price = getProductPrice(selectedProductType);
                 const quantity = parseInt(document.getElementById('quantity').value) || 1;
                 const subtotal = price * quantity;
                 const shippingCost = 20; // Fixed shipping cost in SAR
                 const vatRate = 0.15; // 15% VAT rate
                 const vatAmount = subtotal * vatRate;
                 const total = subtotal + shippingCost + vatAmount;

                 // Construct the HTML for the cost breakdown
                 let costBreakdownHTML = `
                     <div class="cost-item">
                         <span class="cost-label">${COST_LABELS.price[lang] || COST_LABELS.price.en}:</span>
                         <span class="cost-value">${lang === 'en' ? `SAR ${price.toFixed(2)}` : `${price.toFixed(2)} ÿ±ŸäÿßŸÑ`} √ó ${quantity}</span>
                     </div>
                     <div class="cost-item">
                         <span class="cost-label">${COST_LABELS.shipping[lang] || COST_LABELS.shipping.en}:</span>
                         <span class="cost-value">${lang === 'en' ? `SAR ${shippingCost.toFixed(2)}` : `${shippingCost.toFixed(2)} ÿ±ŸäÿßŸÑ`}</span>
                     </div>
                     <div class="cost-item">
                         <span class="cost-label">${COST_LABELS.vat[lang] || COST_LABELS.vat.en} (${(vatRate * 100).toFixed(0)}%):</span>
                         <span class="cost-value">${lang === 'en' ? `SAR ${vatAmount.toFixed(2)}` : `${vatAmount.toFixed(2)} ÿ±ŸäÿßŸÑ`}</span>
                     </div>
                     <div class="cost-total">
                         <span class="total-label">${COST_LABELS.total[lang] || COST_LABELS.total.en}:</span>
                         <span class="total-amount">${lang === 'en' ? `SAR ${total.toFixed(2)}` : `${total.toFixed(2)} ÿ±ŸäÿßŸÑ`}</span>
                     </div>
                 `;

                 totalCostDiv.innerHTML = costBreakdownHTML;

             } else {
                 // Handle case where product type is not found
                 productNameElement.textContent = lang === 'en' ? 'Product Not Found' : 'ÿßŸÑŸÖŸÜÿ™ÿ¨ ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ';
                 totalCostDiv.innerHTML = ''; // Clear the total cost section
             }
         }

        // Function to update payment method text
        function updatePaymentMethodText() {
            const lang = document.documentElement.lang;
            document.querySelectorAll('.payment-method').forEach(methodEl => {
                methodEl.querySelectorAll('.en, .ar').forEach(span => {
                    if (span.classList.contains(lang)) {
                        span.style.display = '';
                    } else {
                        span.style.display = 'none';
                    }
                });
            });
        }

        // Function to update shipping company text
        function updateShippingCompanyText() {
            const lang = document.documentElement.lang;
            document.querySelectorAll('.shipping-company').forEach(companyEl => {
                companyEl.querySelectorAll('.en, .ar').forEach(span => {
                    if (span.classList.contains(lang)) {
                        span.style.display = '';
                    } else {
                        span.style.display = 'none';
                    }
                });
            });
        }

        // Language toggle functionality
        document.getElementById('language-toggle').addEventListener('click', function() {
            const html = document.documentElement;
            const currentLang = html.lang;
            const newLang = currentLang === 'en' ? 'ar' : 'en';
            const newDir = newLang === 'ar' ? 'rtl' : 'ltr';

            html.lang = newLang;
            html.dir = newDir;

            updateTextContent(); // Update all text after changing language
        });

         // Theme toggle functionality
         document.getElementById('theme-toggle').addEventListener('click', function() {
             const body = document.body;
             body.classList.toggle('dark-mode');
             // Optionally save theme preference to localStorage
             const currentTheme = body.classList.contains('dark-mode') ? 'dark' : 'light';
             localStorage.setItem('theme', currentTheme);
         });

        // Payment method selection
        document.querySelectorAll('.payment-method').forEach(methodEl => {
            methodEl.addEventListener('click', function() {
                // Remove 'selected' class from all payment methods
                document.querySelectorAll('.payment-method').forEach(el => el.classList.remove('selected'));
                // Add 'selected' class to the clicked payment method
                this.classList.add('selected');
            });
        });

        // Shipping company selection
        document.querySelectorAll('.shipping-company').forEach(companyEl => {
            companyEl.addEventListener('click', function() {
                // Remove 'selected' class from all shipping companies
                document.querySelectorAll('.shipping-company').forEach(el => el.classList.remove('selected'));
                // Add 'selected' class to the clicked shipping company
                this.classList.add('selected');
            });
        });

        // Form submission and success message
        document.getElementById('paymentForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent actual form submission

            const form = event.target;

            // Basic form validation
            if (!form.checkValidity()) {
                // If form is invalid, the browser will show default validation messages
                return;
            }

            // Check if a payment method is selected
            if (!document.querySelector('.payment-method.selected')) {
                alert(document.documentElement.lang === 'en' ? 'Please select a payment method.' : 'ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™Ÿäÿßÿ± ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿØŸÅÿπ.');
                return;
            }

            // Check if a shipping company is selected
            if (!document.querySelector('.shipping-company.selected')) {
                alert(document.documentElement.lang === 'en' ? 'Please select a shipping company.' : 'ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™Ÿäÿßÿ± ÿ¥ÿ±ŸÉÿ© ÿßŸÑÿ¥ÿ≠ŸÜ.');
                return;
            }

            // Simulate payment processing (replace with actual payment gateway integration)
            console.log('Processing payment...');
            console.log('Product:', selectedProductType);
            console.log('Quantity:', document.getElementById('quantity').value);
            console.log('Shipping Company:', document.querySelector('.shipping-company.selected')?.dataset.company);
            console.log('Payment Method:', document.querySelector('.payment-method.selected')?.dataset.method);

            // Hide the form and show the success message
            form.style.display = 'none';
            document.getElementById('successMessage').style.display = 'block';

             // Hide product summary and payment methods after success
             document.querySelector('.product-summary').style.display = 'none';
             document.querySelector('.payment-methods').style.display = 'none';
             document.querySelector('.shipping-companies').style.display = 'none';
             document.querySelector('.quantity-selector').style.display = 'none';
             document.querySelector('.total-cost').style.display = 'none';

             // Optionally, redirect or provide further actions after a delay
             // setTimeout(() => { /* redirect or clear form */ }, 5000);
        });

        // Initial setup on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Set initial language and direction
            const initialLang = document.documentElement.lang || 'en'; // Default to English
            document.documentElement.dir = initialLang === 'ar' ? 'rtl' : 'ltr';

            // Get product type from URL
            const urlParams = new URLSearchParams(window.location.search);
            const type = urlParams.get('type');
            if (type && PRODUCT_INFO[type]) {
                selectedProductType = type;
            } else {
                 // Default or handle error if type is not valid
                 selectedProductType = 'ihram'; // Fallback
                 console.warn('Invalid or missing product type in URL, defaulting to ihram.');
            }

            // Apply initial language texts and placeholders, which also updates product details
            updateTextContent();

            // Set initial dark mode based on localStorage or system preference
             const savedTheme = localStorage.getItem('theme');
             if (savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                 document.body.classList.add('dark-mode');
             } else {
                 document.body.classList.remove('dark-mode');
             }

             // Update placeholders initially
             document.querySelectorAll('#paymentForm input, #paymentForm textarea').forEach(input => {
                 const enPlaceholder = {
                     'name': 'Enter your name',
                     'phone': 'Enter your phone number',
                     'email': 'Enter your email',
                     'address': 'Enter your address'
                 };
                 const arPlaceholder = {
                     'name': 'ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖŸÉ',
                     'phone': 'ÿ£ÿØÿÆŸÑ ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅŸÉ',
                     'email': 'ÿ£ÿØÿÆŸÑ ÿ®ÿ±ŸäÿØŸÉ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä',
                     'address': 'ÿ£ÿØÿÆŸÑ ÿπŸÜŸàÿßŸÜŸÉ'
                 };
                 const placeholderText = initialLang === 'en' ? enPlaceholder[input.id] : arPlaceholder[input.id];
                  if (placeholderText) {
                       input.placeholder = placeholderText;
                  }
             });

             // Select the first payment method by default (optional)
             const firstPaymentMethod = document.querySelector('.payment-method');
             if(firstPaymentMethod) {
                 firstPaymentMethod.classList.add('selected');
             }

             // Select the first shipping company by default (optional)
             const firstShippingCompany = document.querySelector('.shipping-company');
             if(firstShippingCompany) {
                 firstShippingCompany.classList.add('selected');
             }

             // Initialize quantity buttons
             updateQuantityButtons();

             // Update quantity input attributes based on user type
             updateQuantityInput();
             
             // Update product details after setting quantity
             updateProductDetails();
        });

        // Function to get quantity limits based on user type
        function getQuantityLimits() {
            const userType = localStorage.getItem('userType') || 'individual';
            return userType === 'business' ? { min: 100, max: 500 } : { min: 1, max: 10 };
        }

        // Function to change quantity
        function changeQuantity(change) {
            const quantityInput = document.getElementById('quantity');
            const currentQuantity = parseInt(quantityInput.value);
            const newQuantity = currentQuantity + change;
            const limits = getQuantityLimits();
            
            // Ensure quantity stays within bounds based on user type
            if (newQuantity >= limits.min && newQuantity <= limits.max) {
                quantityInput.value = newQuantity;
                updateProductDetails(); // Recalculate total with new quantity
                updateQuantityButtons(); // Update button states
            }
        }

        // Function to update quantity button states
        function updateQuantityButtons() {
            const quantity = parseInt(document.getElementById('quantity').value);
            const limits = getQuantityLimits();
            const minusBtn = document.querySelector('.quantity-btn.minus');
            const plusBtn = document.querySelector('.quantity-btn.plus');
            
            // Disable minus button if quantity is at minimum
            minusBtn.disabled = quantity <= limits.min;
            
            // Disable plus button if quantity is at maximum
            plusBtn.disabled = quantity >= limits.max;
        }

        // Function to update quantity input attributes based on user type
        function updateQuantityInput() {
            const quantityInput = document.getElementById('quantity');
            const limits = getQuantityLimits();
            
            // Update min, max, and value attributes
            quantityInput.min = limits.min;
            quantityInput.max = limits.max;
            
            // Set initial value to minimum for business users
            if (limits.min > 1) {
                quantityInput.value = limits.min;
            }
        }

    </script>

</body>
</html>
